<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <title>Blitzboard</title>
    <link crossorigin='anonymous' href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css'
        rel='stylesheet'>
    <link crossorigin='anonymous'
        href='https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/addon/dialog/dialog.min.css' rel='stylesheet'>
    <link href='./img/apple-touch-icon.png' rel='apple-touch-icon' sizes='180x180'>
    <link href='./img/favicon-32x32.png' rel='icon' sizes='32x32' type='image/png'>
    <link href='./img/favicon-16x16.png' rel='icon' sizes='16x16' type='image/png'>
    <link href='/site.webmanifest' rel='manifest'>
    <link color='#848484' href='./img/safari-pinned-tab.svg' rel='mask-icon'>
    <meta content='#ffffff' name='msapplication-TileColor'>
    <meta content='#ffffff' name='theme-color'>
    <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css' rel='stylesheet'>
    <link href='https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css' rel='stylesheet'>
    <link href='./css/jquery-ui.min.css' rel='stylesheet'>
    <link href='./css/codemirror/codemirror.css' rel='stylesheet'>
    <link href='./css/monokai.css' rel='stylesheet'>
    <link href='./css/codemirror/addon/show-hint.css' rel='stylesheet'>
    <link href='./img/favicon.ico' rel='shortcut icon' type='image/x-icon'>
    <link href='https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css' rel='stylesheet'>
    <link crossorigin='' href='https://unpkg.com/leaflet@1.6.0/dist/leaflet.css'
        integrity='sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=='
        rel='stylesheet'>
    <link href='./css/sandbox.css' rel='stylesheet'>
    <script src='https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js'></script>
    <script src='https://unpkg.com/papaparse@5.3.2/papaparse.min.js'></script>
    <script src='https://unpkg.com/vis-network@9.0.4/standalone/umd/vis-network.min.js'></script>
    <script src='./src/jquery-3.5.1.min.js'></script>
    <script src='./src/jquery-ui.min.js'></script>
    <script src='./src/pg_parser_browserified.js' type='text/javascript'></script>
    <script src='./src/json2pg_browserified.js' type='text/javascript'></script>
    <script src='./src/codemirror/codemirror.js'></script>
    <script src='./src/codemirror/simple.js'></script>
    <script src='./src/codemirror/pg_mode.js'></script>
    <script src='./src/codemirror/mark-selection.js'></script>
    <script src='./src/codemirror/dialog.js'></script>
    <script src='./src/codemirror/search.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/addon/search/searchcursor.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/addon/hint/show-hint.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/addon/hint/anyword-hint.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/addon/comment/comment.js'></script>
    <script src='./src/codemirror/javascript_mode.js'></script>
    <script src='./src/sandbox-util.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js'></script>
    <script crossorigin='anonymous' integrity='sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM'
        src='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js'></script>
    <script crossorigin=''
        integrity='sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=='
        src='https://unpkg.com/leaflet@1.6.0/dist/leaflet.js'></script>
    <script src='https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js' type='module'></script>
    <script nomodule='' src='https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/jszip@3.2.1/dist/jszip.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.4/FileSaver.min.js'></script>
    <script src='./dist/blitzboard.bundle.js'></script>
    <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>

    <link href='https://fonts.googleapis.com/css?family=Arvo' rel='stylesheet' type='text/css'>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>

<body>
    <div id='app'>
        <nav class='navbar navbar-expand-md navbar-light bg-white shadow-sm sticky-top' id='header'>
            <div class='ms-3 me-4' data-bs-toggle='tooltip' data-placement='bottom' href='#' title='About Blitzboard'>
                <a href='https://www.blitzboard.io/' target="_blank">
                    <img src='./img/blitzboard-icon-only.png' style='height: 23px;'>
                </a>
            </div>
            <div class='dropdown ml-3 mt-1'>
                <div aria-haspopup class='text-white mx-0 dropdown-toggle' data-bs-toggle='dropdown'
                    id='history-dropdown'
                    style='width: 220px; text-align: left; overflow: hidden; white-space: nowrap;text-overflow: ellipsis;'
                    type='button'></div>
                <div aria-labelledby='historyDropdown' class='dropdown-menu' id='history-menu'></div>
            </div>
            <li class='nav-item'>
                <label class='btn disabled text-white' data-bs-toggle='tooltip' data-placement='bottom' href='#'
                    id='save-btn' title='Save'>
                    <span class="material-symbols-outlined">
                        save
                    </span>
                </label>
            </li>
            <ul class='navbar-nav justify-content-end' style='margin-left: auto; margin-right: 0;'>
                <input autocomplete='off' class='btn-check' id='edit-panel-btn' name='view-mode' type='checkbox'>
                <label class='me-3 btn btn-outline-secondary text-white' data-bs-toggle='tooltip'
                    data-placement='bottom' for='edit-panel-btn' style='border: none' title='Edit mode'>
                    <span class="material-symbols-outlined edit">
                        edit
                    </span>
                    <span class="material-symbols-outlined edit-off">
                        edit_off
                    </span>
                </label>
                </input>
                <li class='nav-item'>
                    <div aria-haspopup class='dropdown' data-bs-toggle='tooltip' title='New'>
                        <div class='btn dropdown-toggle' data-bs-toggle='dropdown' id='new-btn' type='button'>
                            <span class="material-symbols-outlined">
                                note_add
                            </span>
                        </div>
                        <div aria-labelledby='new-btn' class='dropdown-menu dropdown-menu-end' id='templates-dropdown'>
                        </div>
                    </div>
                </li>
                <li class='nav-item'>
                    <label class='btn text-white' data-bs-toggle='tooltip' data-placement='bottom' href='#'
                        id='clone-btn' title='Clone'>
                        <span class="material-symbols-outlined">
                            file_copy
                        </span>
                    </label>
                </li>
                <li class='nav-item'>
                    <label class='btn text-white' data-bs-toggle='tooltip' data-placement='bottom' for='import-btn'
                        href='#' title='Import'>
                        <span class="material-symbols-outlined" id='import-btn'>
                            file_upload
                        </span>
                        </label>
                        <input accept='.zip' id='import-input' type='file'>
                        </input>
                    </label>
                </li>
                <li class='nav-item'>
                    <div aria-haspopup class='dropdown' data-bs-toggle='tooltip' title='Export'>
                        <div class='btn dropdown-toggle' data-bs-toggle='dropdown' id='export-btn' type='button'>
                            <span class="material-symbols-outlined">
                                file_download
                            </span>
                        </div>
                        <div aria-labelledby='export-btn' class='dropdown-menu dropdown-menu-end'>
                            <a class='dropdown-item' href='#' id='export-zip-btn'>
                                PG & Config (Zip)
                            </a>
                            <a class='dropdown-item' href='#' id='export-csv-btn'>
                                CSV (Zip)
                            </a>
                            <a class='dropdown-item' href='#' id='export-json-btn'>
                                JSON
                            </a>
                            <a class='dropdown-item' href='#' id='export-cypher-btn'>
                                Cypher Query
                            </a>
                            <a class='dropdown-item' href='#' id='export-pgql-btn'>
                                PGQL Query
                            </a>
                            <a class='dropdown-item' href='#' id='export-sql-btn'>
                                SQL Query
                            </a>
                            <a class='dropdown-item' href='#' id='export-png-btn'>
                                PNG
                            </a>
                            <a class='dropdown-item' href='#' id='embed-btn'>
                                JavaScript
                            </a>
                        </div>
                    </div>
                </li>
            </ul>
        </nav>
        <div id='network-popUp'>
            <span id='operation'>node</span>
            <br>
            <table style='margin: auto'>
                <tbody id='popup-table'></tbody>
            </table>
            <input id='saveButton' type='button' value='save'>
            <input id='cancelButton' type='button' value='cancel'>
        </div>
        <div id='main-area'>
            <div id='input-area'>
                <div id='pg-area'>
                    <textarea id='graph-input' style='height: 100%; width: 100%;'>

                    </textarea>
                    <div aria-haspopup class='dropdown' data-bs-toggle='tooltip' id='options-btn'
                        style='position: absolute' title='Options'>
                        <div class='btn text-white' data-bs-toggle='dropdown' id='options-dropdown' type='button'>
                            <span class="material-symbols-outlined">
                                settings
                            </span>
                        </div>
                        <div aria-labelledby='options-dropdown' class='dropdown-menu dropdown-menu-right'>
                            <a class='dropdown-item' href='#' id='options-auto-complete'>
                                <input checked='checked' class='pe-none' id='options-auto-complete-input'
                                    type='checkbox'>
                                <label class='w-100' for='options-auto-complete-input'>Auto Complete</label>
                            </a>
                            <a class='dropdown-item' href='#' id='options-show-config'>
                                <input class='pe-none' id='options-show-config-input' type='checkbox'>
                                <label for='options-show-config-input'>Show Config</label>
                            </a>
                            <a class='dropdown-item' href='#' id='options-cross-impact'>
                                <label class='w-100'>
                                    Cross impact factor
                                </label>
                            </a>
                            <a class='dropdown-item' href='#' id='options-insert-edges'>
                                <label class='w-100'>
                                    Insert edges
                                </label>
                            </a>
                            <a class='dropdown-item' href='#' id='options-search'>
                                <label class='w-100'>
                                    Search
                                    <div class='pull-right text-muted' id='search-shortcut-text'
                                        style='margin-left: 50px;'>
                                        Ctrl-F</div>
                                </label>
                            </a>
                            <a class='dropdown-item' href='#' id='options-replace'>
                                <label class='w-100'>
                                    Replace
                                    <div class='pull-right text-muted' id='replace-shortcut-text'
                                        style='margin-left: 50px;'>
                                        Shift-Ctrl-F</div>
                                </label>
                            </a>
                            <a class='dropdown-item' href='#' id='options-sort'>
                                <label class='w-100' for='options-auto-complete-input'>
                                    Sort
                                    <div class='pull-right text-muted' id='sort-shortcut-text'
                                        style='margin-left: 50px;'>Ctrl-S
                                    </div>
                                </label>
                            </a>
                            <div class='dropdown-item' id='backendUrlDropdown'>
                                Backend URL
                                <br>
                                <input id='options-backend-url-input' placeholder='If empty, local storage is used'
                                    style='cursor: text; width: 250px;' type='text'>
                            </div>
                        </div>
                    </div>
                </div>
                <div id='config-area'>
                    <textarea id='config-input' style='height: 100%; width: 100%;'></textarea>
                    <div class='float-btn btn btn-info p-0' data-bs-toggle='tooltip' data-placement='bottom' href='#'
                        id='reset-config-btn' title='Reset Config'>
                        <span class="material-symbols-outlined">
                            restart_alt
                        </span>
                    </div>
                </div>
            </div>
            <div class='h-100' id='graph-pane'>
                <div class='h-100' id='graph'></div>
            </div>

            <div class='float-btn btn btn-info' data-bs-toggle='tooltip' data-placement='bottom' href='#'
                id='zoom-fit-btn' style='padding:4px;' title='Fit'>
                <span class="material-symbols-outlined fit-screen">
                    fit_screen
                </span>
            </div>

            <div id="node-filter-div" style="display: none;">
                <label>
                    ノードフィルタ：
                </label>
                <select id='node-filter-prop' class="node-filter-ui" style='height: 30px; width: 150px;' type='text'>
                </select>
                <select id='node-filter-operator' class="node-filter-ui" style='height: 30px; width: 40px; text-align-last:center;'>
                    <option> < </option>
                    <option> <= </option>
                    <option> = </option>
                    <option> >= </option>
                    <option> > </option>
                </select>
                <input id='node-filter-value' class="node-filter-ui" style='height: 30px; width: 50px;' type='number'>
            </div>

            <div id="edge-filter-div" style="display: none;">
                <label>
                    エッジフィルタ：
                </label>
                <select id='edge-filter-prop' class="edge-filter-ui" style='height: 30px; width: 150px;' type='text'>
                </select>
                <select id='edge-filter-operator' class="edge-filter-ui" style='height: 30px; width: 40px; text-align-last:center; '>
                    <option> < </option>
                    <option> <= </option>
                    <option> = </option>
                    <option> >= </option>
                    <option> > </option>
                </select>
                <input id='edge-filter-value' class="edge-filter-ui" style='height: 30px; width: 50px;' type='number'>
            </div>
        </div>
    </div>
    <div class='modal' id='sort-modal' tabindex='-1'>
        <div class='modal-dialog'>
            <div class='modal-content'>
                <div class='modal-header'>
                    <h5 class='modal-title'>Sort lines</h5>
                    <button aria-label='Close' class='btn-close' data-bs-dismiss='modal' type='button'></button>
                </div>
                <div class='modal-body'>
                    <p>
                        <em class='text-danger d-none' id='comment-warning-line'>
                            Warning: Comment lines will be deleted after sort.
                        </em>
                    </p>
                    <div class='row my-3'>
                        <div class='col-4'>
                            Sort node lines by:
                        </div>
                        <div class='col-8'>
                            <select id='sort-node-lines-select' style='min-width: 100px;'></select>
                        </div>
                    </div>
                    <div class='row my-3'>
                        <div class='col-4'>
                            Sort edge lines by:
                        </div>
                        <div class='col-8'>
                            <select id='sort-edge-lines-select' style='min-width: 100px;'></select>
                        </div>
                    </div>
                    <div class='row my-3'>
                        <div class='col-4'>
                            Sort order:
                        </div>
                        <div class='col-8'>
                            <input checked id='sort-order-asc-radio' name='sort-order' type='radio' value='1'>
                            <label for='sort-order-asc-radio'>
                                ASC
                            </label>
                            <input id='sort-order-desc-radio' name='sort-order' type='radio' value='-1'>
                            <label for='sort-order-desc-radio'>
                                DESC
                            </label>
                        </div>
                    </div>
                </div>
                <div class='modal-footer'>
                    <button class='btn btn-secondary' data-bs-dismiss='modal' type='button'>Cancel</button>
                    <button class='btn btn-primary' id='sort-btn' type='button'>Sort</button>
                </div>
            </div>
        </div>
    </div>
    <div class='modal' id='metagraph-modal' tabindex='-1'>
        <div class='modal-dialog' style='max-width: 90vw;'>
            <div class='modal-content'>
                <div class='modal-header my-0'>
                    <div id='metagraph-modal-title'></div>
                </div>
                <div class='modal-body' style='overflow-y:auto;'>
                    <div id='metagraph-pane' style='height: 75vh; width: 100%;'>
                        <div id='metagraph-modal-graph'></div>
                    </div>
                    <div class='pull-right'>
                        <input id='all-graphs-checkbox' type='checkbox'>
                        <label for='all-graphs-checkbox'>All graphs</label>
                        <button class='ms-5 btn btn-secondary' data-bs-dismiss='modal' type='button'>close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src='./page_templates.js'></script>
    <script src='./src/sandbox.js'></script>
    <script src='./src/scc.js'></script>
</body>

</html>